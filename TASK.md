# Тестовое задание по курсу Golang

Спроектировать API, документировать и реализовать HTTP/REST сервис с использованием языка golang и БД Postgress. Формат обмена данными JSON.

#### API содержит следующие сущности

1. ##### Пользователь:
* Поля:
	- login;
	- password;
	- читаемое имя;

2. ##### Аудиозаписи:
* Поля:
	- id;
	- название;
	- сама звукозапись (файл в формате AAC)

#### API содержит следующие методы

1. ##### Зарегистрировать пользователя
* Параметры:
	- login;
	- password;
	- читаемое имя;

* Возвращаемое значение:
	- успех/код ошибки.

2. ##### Авторизовать пользователя
* Параметры:
	- login;
	- password;

* Возвращаемое значение:
	- сессионный token в случае успешной авторизации, код ошибки в случае неверного сочетания login/password.

3. ##### Список доступных аудиозаписей
Метод доступен только авторизованным пользователям
* Параметры:
	- пагинация
	- признак сортировки: вариант 1) по автору - в начале свои звукозаписи, потом “расшаренные” другими пользователями с группировкой по пользователю, внутри группы сортировка по алфавиту), вариант 2) аудиозаписи по алфавиту;

* Возвращаемое значение:
	- JSON со списком аудиозаписей, отсортированные в соответствии с параметрами запроса.

* В каждой записи должны присутствовать поля:
	- id звукозаписи;
	- название звукозаписи;
	- признак своя запись или “зашареная другим” пользователем;
	- id пользователя владельца записи;
	- имя пользователя владельца записи;
	- массив id и читаемых имен пользователей, которым “зашарена” аудиозапись.

* Пример ответа:

```
{
	“total_count”: 100,
	“records” : [
		{
			“id”: 100,
			“name”: “my song”,
			“is_owner”: false,
			“owner_id”: 44,
			“owner_name”: “user 44 name”,
			“shared_to”: [
				{
					“id”: 45,
					“name”: “user 45 name”
				},
				….
			]
		},
		….
	]
}
```

4. ##### “Расшарить” аудиозапись

Метод доступен только авторизованным пользователям

* Параметры:
	- id аудиозаписи;
	- id пользователя которому “зашарить”;

* Возвращаемое значение:
	- успех/код ошибки;

5. ##### Завершить “шаринг” аудиозаписи

Метод доступен только авторизованным пользователям

* Параметры:
	- id аудиозаписи;
	- id пользователя, у которого отозвать доступ;

* Возвращаемое значение:
	- успех/код ошибки.

6. ##### Получить список пользователей, которые “зашарили” аудиозаписи

Метод доступен только авторизованным пользователям

* Параметры запроса:
	- пагинация;

* Возвращаемое значение:
	- JSON со список пользователей, и количеством зашаренных аудиозаписей
```
{
	“total_count”: 100,
	“users” : [
		{
			“id”: 44,
			“name”: “user 44 name”,
			“shared_records”: 1,
		},
		…
	]
}
```

7. ##### Создать новую аудиозапись

Метод доступен только авторизованным пользователям

* Параметры запроса:
	- название аудиозаписи
	- длительность аудиозаписи
	- файл со звукозаписью

8. ##### Получить файл с аудиозаписью

Метод доступен только авторизованным пользователям

* Параметры запроса:
	- id аудиозаписи

* Возвращаемое значение:
	- файл со звукозаписью/код ошибки.